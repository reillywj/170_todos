<% content_for :header_links do %>
  <a href="/lists" title="View all lists" class="list">All Lists</a>
<% end %>

<section id='todos'>
  <header>
    <h2><%= @list[:name] %></h2>
    <ul>
      <li>
        <a href="/list/<%= @list_id %>/edit" class="edit" title='edit list'></a>
      </li>
    </ul>
  </header>

  <% if @list[:todos].empty? %>
    <ul><li><p class="no_list">You have no todos yet.</p></li></ul>
  <% else %>
    <ul>
      <% @list[:todos].each_with_index do |todo, index| %>
        <li <% if todo[:completed] %> class="complete"<% end %>>
            <form action="/list/<%= @list_id%>/todo/<%= index %>/<%= todo[:completed] ? "incomplete" : "complete" %> " method="post" class="check">
              <input type="hidden" name="completed" value=""/>
              <button type="submit">Complete</button>
            </form>
            <h3><%= todo[:name] %></h3>
            <form action='/list/<%= @list_id%>/todo/<%= index %>/delete' method='post' class="delete">
              <button type='submit'></button>
            </form>
        </li>
      <% end %>
    </ul>
  <% end %>
</section>

<form action="/list/<%= @list_id%>/todos" method='post'>
  <dl>
    <dt>
      <label for='todo'>Enter a new todo item:</label>
    </dt>
    <dd>
      <input name='todo' placeholder='Something todo...' type='text' value="<%= params[:todo] || ''%>">
    </dd>
  </dl>
  <fieldset class='actions'>
    <input type='submit' value='Add'>
  </fieldset>
</form>
